import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from "@/components/ui/accordion";
import { Badge } from "@/components/ui/badge";

const DataCollection = () => {
  const tasks = [
    {
      id: "survey-interview",
      title: "ניסוח שאלונים וראיונות",
      titleEn: "Survey & Interview",
      subtasks: ["ניסוח שאלות פתוחות/סגורות", "בדיקת ניסוחים להבנה וחדות"],
      principles: "אי-גרימת נזק: הימנעות מפגיעה, צדק: הגינות וחלוקה הוגנת של משאבים, אוטונומיה: כיבוד חירות ובחירת האדם",
      howToAct: [
        "Human In The Loop: נשתמש ב-AI כדי לייצר רשימה ראשונית של שאלות. לא נקבל אף ניסוח של שאלה שנוצר על ידי AI באופן עיוור - כל שאלה חייבת לעבור ליטוש ותיקוף על ידי מומחה אנושי.",
        'בקרה על גיוון בניסוח: ננסה לגייס אדם נוסף (peer review) שיכול לייצג קבוצת תרבות, גיל או מגדר שונה לבדיקת הניסוחים של השאלות לפני הפצת הסקר או ביצוע הראיונות. אם אין אפשרות לביקורת אנושית מגוונת, נוכל לבקש מה-AI לתפקד כמומחה DEI (Diversity, Equity, and Inclusion) כדי לזהות הטיות בתוך הניסוח.',
        "התאמה לתרבות המקומית: נבדוק כל שאלה שנוסחה על ידי AI לוודא שאינה מכילה הטיה תרבותית מערבית, ושאינה מפספסת ביטויים או רפרנסים מקומיים (למשל, ישראליים/מזרח תיכוניים).",
        "שמירה על פרטיות: יש להקפיד לנסח את השאלות באופן שאינו דורש גילוי של פרטים מזהים או פרטים אישיים שאינם חיוניים למטרת המחקר.",
        'שמירה על שקיפות: גילוי ברור לגבי השימוש ב-AI למשתתפים היא חשובה לבניית היושרה והאמון. ננסח, בטופס הסקר או בפתיחת הראיון, הצהרה פשוטה שמסבירה למשתתפי המחקר בדיוק כיצד ומתי יעשה שימוש ב-AI בנתונים שלו. נבטיח הגנה מפני אימון מודל: אם המידע יכול לשמש לאימון מודל AI פנימי, יש לאפשר למשתתפים לסרב לכך מראש ולכבד את בחירתם.',
      ],
    },
    {
      id: "simulation",
      title: "סימולציות ראיונות ושיחות",
      titleEn: "Interview Simulation & Practice",
      subtasks: ["תרגול שאלות מול מודלי בינה מלאכותית", "בדיקת זרימת שיחה"],
      principles: "אי-גרימת נזק: הימנעות מפגיעה, צדק: הגינות וחלוקה הוגנת של משאבים",
      howToAct: [
        "שמירה על פרטיות: נימנע מהעלאת נתונים אישיים מזהים (PII), מידע קנייני שטרם פורסם או נתונים סודיים לכלי סימולציה חיצוניים. אם מוכרחים להזין נתונים אמיתיים ליצירת פרסונה סינתטית מדויקת, נבצע אנונימיזציה מלאה למידע המקורי לפני ההזנה למערכת ה-AI.",
        "שמירה על גיוון: נבצע ביקורת (Audit) באופן יזום על הטייה אפשרית: למשל, נסרוק את התובנות של הסימולציה ונבחן אם הפלט מעניק יתרון או חסרון באופן שיטתי לקבוצות משתמשים מסוימות.",
        'איתגור הנחות יסוד: ננטרל את נטיית הצוות לחפש אישוש (Confirmation Bias) להצלחת העיצוב, ונחייב את ה-AI לדמות כישלון ולחקור אותו. במקום "בצע סימולציה של ראיון עם משתמש שמנסה להשלים את תהליך הקנייה החדש בצורה מוצלחת" (מכתיב מראש הצלחה), נגדיר בפרומפט - "בצע סימולציה של ראיון עם משתמש המנסה להשלים את תהליך הקנייה. חצי מהמשתמשים יגיעו להשלמה, וחצי יתקלו בכשל משמעותי. פרט את נקודות הכשל והתסכול שלהם."',
        "בקרה אנושית: נבקר ונפקח על כל תובנה, סיכום או המלצה המתקבלים מהסימולציה, ונאמת אותם אל מול שאלת המחקר המקורית ונתונים ממשתמשים אמיתיים.",
      ],
    },
    {
      id: "survey-distribution",
      title: "הפצת סקרים",
      titleEn: "Survey Distribution",
      subtasks: ["אוטומציה של הפצה וניתוח ראשוני"],
      principles: "אוטונומיה: כיבוד חירות ובחירת האדם, אי-גרימת נזק: הימנעות מפגיעה, צדק: הגינות וחלוקה הוגנת של משאבים, עשיית טוב: תרומה לרווחה",
      howToAct: [
        "הסכמה מדעת (Informed Consent) מלאה: נציג את מטרת המחקר, זמן ההשלמה המשוער, וכיצד ייעשה שימוש בנתונים בעמוד הראשון של הסקר, ונדרוש אישור אקטיבי להמשך.",
        "מתן אפשרות פרישה ודילוג: נאפשר למשתתפים לדלג על שאלות או לפרוש מהסקר בכל עת (Right to Withdrawal) תוך כדי הבטחה שכל הנתונים שנאספו עד אותה נקודה יושלכו או ימחקו.",
        "הבטחת אנונימיות וסודיות: נצהיר על ההבדל בין סודיות (Confidentiality) לאנונימיות (Anonymity) ונוודא שאין איסוף של נתונים מזהים (כגון כתובות IP או אימייל) אלא אם כן נדרש הדבר במפורש, ונשמור נתונים אלו בצורה מאובטחת.",
        "נימנע מלחץ וכפייה: נמנע משימוש במניפולציות או ניצול יחסי כוח (כגון מנהל שמפיץ סקר לעובדים הכפופים לו) כדי לגייס משתתפים.",
        "שפה נגישה ומכלילה: נשתמש בשפה נגישה (Accessible) ונימנע ממונחים מקצועיים (ג'רגון) כדי להבטיח שכל אוכלוסיית היעד, כולל משתתפים בעלי מוגבלות קוגניטיבית או אוריינות נמוכה, תוכל להבין ולהשתתף באופן שווה.",
        "זיהוי סיכונים רגשיים ומתן תמיכה: אם הסקר עוסק בנושאים רגישים (כגון בריאות נפש או מצבים פיננסיים), נזהה מראש את הפוטנציאל לגרימת מצוקה רגשית ונספק משאבי תמיכה (קישור לגורם מקצועי) בעמוד הסיום של הסקר.",
      ],
    },
    {
      id: "ai-moderated",
      title: "מחקר מונחה בינה מלאכותית",
      titleEn: "AI-Moderated Research",
      subtasks: ["ביצוע מחקר שבו מערכת AI מנהלת או מקיימת אינטראקציה ישירה עם המשתתפים"],
      principles: "אוטונומיה: כיבוד חירות ובחירת האדם, אי-גרימת נזק: הימנעות מפגיעה, צדק: הגינות וחלוקה הוגנת של משאבים, עשיית טוב: תרומה לרווחה",
      howToAct: [
        "שקיפות גילוי נאות מלא: נגלה למשתתפים באופן ברור ומיידי שהם משוחחים עם מנחה מבוסס-AI, ולא עם אדם, כחלק בלתי נפרד מתהליך ההסכמה מדעת.",
        "הסכמה פרטנית: נבקש הסכמה מפורשת וספציפית לשימוש בנתונים הנאספים, כולל שקיפות האם הנתונים ישמשו לאימון של מודלי AI עתידיים.",
        "ביקורת אנושית: נשתמש במנחה ה-AI כמשאב משלים בלבד, ונבצע ביקורת אנושית על כל התובנות שנוצרו על ידי ה-AI כדי לזהות הטיות, לפרש הקשר רגשי ותרבותי ולוודא אי-אפליה.",
        "שליטה וערעור: נספק למשתתף ערוץ ברור ואנושי ליצור קשר עם חוקר אנושי, כדי שיוכל לערער על אינטראקציה, לשאול שאלות או לבקש מחיקת נתונים אם חווה מצוקה או חוסר נוחות.",
      ],
    },
  ];

  return (
    <div className="min-h-screen bg-gradient-to-b from-background to-muted py-12 px-6 md:px-12" dir="rtl" lang="he">
      <div className="max-w-6xl mx-auto space-y-12">
        {/* Header */}
        <div className="space-y-4">
          <h1 className="text-5xl font-bold text-foreground">🧪 שלב 2: איסוף נתונים</h1>
          <div className="card-elevated p-8">
            <p className="text-xl text-foreground/90 leading-relaxed">
              בשלב זה נאסף המידע הנדרש למחקר באמצעים שונים: ראיונות, שאלונים, תצפיות, ומבדקי שימושיות.
              זהו שלב עדין וקריטי מבחינת מהימנות הנתונים והאופן שבו אנו מייצגים את קולות המשתמשים.
              שילוב AI בשלב זה נועד להאיץ תהליכים, לחדד שאלות, ולתמוך באיסוף שיטתי, תוך שמירה על אמפתיה, שקיפות ופרטיות.
            </p>
          </div>
        </div>

        {/* Tasks */}
        <div className="space-y-6">
          {tasks.map((task) => (
            <div key={task.id} className="card-elevated">
              <Accordion type="single" collapsible>
                <AccordionItem value={task.id} className="border-none">
                  <AccordionTrigger className="px-8 py-6 hover:no-underline">
                    <div className="text-right">
                      <h2 className="text-2xl font-bold text-foreground">{task.title}</h2>
                      <p className="text-lg text-muted-foreground mt-1">({task.titleEn})</p>
                      {task.subtasks && (
                        <p className="text-base text-muted-foreground mt-2">
                          {task.subtasks.join(" • ")}
                        </p>
                      )}
                    </div>
                  </AccordionTrigger>
                  <AccordionContent className="px-8 pb-6 space-y-6">
                    {/* Principles */}
                    <div className="bg-primary/5 rounded-lg p-6 border-r-4 border-r-primary">
                      <h3 className="text-lg font-bold text-foreground mb-3">עקרונות אתיים מהותיים</h3>
                      <div className="flex flex-wrap gap-2">
                        {task.principles.split(", ").map((principle, idx) => (
                          <Badge key={idx} variant="secondary" className="text-sm px-3 py-1">
                            {principle}
                          </Badge>
                        ))}
                      </div>
                    </div>

                    {/* How to Act */}
                    <div>
                      <h3 className="text-lg font-bold text-foreground mb-4">כיצד לפעול</h3>
                      <ul className="space-y-4">
                        {task.howToAct.map((action, index) => (
                          <li key={index} className="text-foreground/90 leading-relaxed pr-6 relative before:content-['•'] before:absolute before:right-0 before:text-primary before:font-bold">
                            {action}
                          </li>
                        ))}
                      </ul>
                    </div>
                  </AccordionContent>
                </AccordionItem>
              </Accordion>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
};

export default DataCollection;
